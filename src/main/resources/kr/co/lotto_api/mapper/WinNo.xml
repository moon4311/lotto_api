<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.lotto_api.mapper.WinNo">
 
 	<sql id="tblnm">WIN_NO_TB</sql>
 	
 	<!-- 한건 조회 -->
 	<select id="selectOne" parameterType="map" resultType="kr.co.lotto_api.model.WinNoVO">
		SELECT 	DRW_NO,
						DT,
						BALL_NO1,
						BALL_NO2,
						BALL_NO3,
						BALL_NO4,
						BALL_NO5,
						BALL_NO6,
						BALL_NO7,
						sum
		FROM 	WIN_NO_TB 
		WHERE 	DRW_NO = #{drwNo}
	</select>
	
	
 	<!-- 다건 조회 -->
 	<select id="selectList" parameterType="map" resultType="WinNoVO">
		SELECT 	DRW_NO,
						DT,
						BALL_NO1,
						BALL_NO2,
						BALL_NO3,
						BALL_NO4,
						BALL_NO5,
						BALL_NO6,
						BALL_NO7,
						sum
		FROM <include refid="tblnm" />
		ORDER BY DRW_NO DESC
		LIMIT ${startNo}, ${cnt}
	</select>
	
 	<!-- 각 자리별 횟수 -->
	<select id="selectBallCntPerNo" parameterType="map" resultType="BallNoVO">
		SELECT BALL_NO,
					 SEQ1_CNT,
					 SEQ2_CNT,
					 SEQ3_CNT,
					 SEQ4_CNT,
					 SEQ5_CNT,
					 SEQ6_CNT
		FROM 	ball_no_tb
	</select>
	
 	<!-- 홀짝 비율 -->
	<select id="selectOddEven" resultType="OddEvenVO">
		SELECT 	odd_cnt,
						total_cnt, cast(total_rate as decimal(4,2)) total_rate, 
			        	win_cnt, cast(win_rate as decimal(4,2)) win_rate
		FROM		LOTTO_NO_ODD_TB
		ORDER BY ODD_CNT
	</select>
	
	<select id="selectSumCnt"  resultType="SumCntVO">
		SELECT		SUM_NO,
						total_cnt, cast(total_rate as decimal(4,3)) total_rate, 
			        	win_cnt, cast(win_rate as decimal(4,3)) win_rate 
		FROM 		SUM_NO_TB
	</select>
	
	
	
	
	<!-- 입력 -->
	<insert id="insert" parameterType="map">
		INSERT INTO <include refid="tblnm"/>
		(
			DRW_NO,
			DT,
			ball_no1,
			ball_no2,
			ball_no3,
			ball_no4,
			ball_no5,
			ball_no6,
			ball_no7,
			sum
		)
		values
		(
			#{drwNo},
			#{dt},
			#{ballNo1},
			#{ballNo2},
			#{ballNo3},
			#{ballNo4},
			#{ballNo5},
			#{ballNo6},
			#{ballNo7},
			#{sum}
		)
	</insert>
	
</mapper>